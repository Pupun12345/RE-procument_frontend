{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/login/login.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"button\": \"login-module__WEZH7G__button\",\n  \"captchaBox\": \"login-module__WEZH7G__captchaBox\",\n  \"captchaInput\": \"login-module__WEZH7G__captchaInput\",\n  \"captchaRow\": \"login-module__WEZH7G__captchaRow\",\n  \"container\": \"login-module__WEZH7G__container\",\n  \"error\": \"login-module__WEZH7G__error\",\n  \"eyeBtn\": \"login-module__WEZH7G__eyeBtn\",\n  \"footerLinks\": \"login-module__WEZH7G__footerLinks\",\n  \"form\": \"login-module__WEZH7G__form\",\n  \"icon\": \"login-module__WEZH7G__icon\",\n  \"inputGroup\": \"login-module__WEZH7G__inputGroup\",\n  \"loginBox\": \"login-module__WEZH7G__loginBox\",\n  \"overlay\": \"login-module__WEZH7G__overlay\",\n  \"passwordWrapper\": \"login-module__WEZH7G__passwordWrapper\",\n  \"refreshBtn\": \"login-module__WEZH7G__refreshBtn\",\n  \"subtitle\": \"login-module__WEZH7G__subtitle\",\n  \"title\": \"login-module__WEZH7G__title\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/KIIT0001/Desktop/hrms/hrms-frontend/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport styles from \"./login.module.css\";\r\nimport { FaUser, FaLock, FaSyncAlt, FaEye, FaEyeSlash } from \"react-icons/fa\";\r\n\r\ninterface LoginResponse {\r\n  success?: boolean;\r\n  token?: string;\r\n  role?: string;\r\n  username?: string;\r\n  message?: string;\r\n}\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [captcha, setCaptcha] = useState(\"\");\r\n  const [generatedCaptcha, setGeneratedCaptcha] = useState(\"9K7RFP\");\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const url = process.env.NEXT_PUBLIC_API_URL;\r\n\r\n  // ✅ Refresh captcha\r\n  const refreshCaptcha = () => {\r\n    const random = Math.random().toString(36).substring(2, 8).toUpperCase();\r\n    setGeneratedCaptcha(random);\r\n    setCaptcha(\"\");\r\n    setError(\"\");\r\n  };\r\n\r\n  // ✅ Handle login\r\n  const handleLogin = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n\r\n    if (captcha.trim() !== generatedCaptcha) {\r\n      setError(\"❌ Invalid Captcha. Please try again.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await fetch(`${url}/login`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n\r\n      const data: LoginResponse = await res.json();\r\n\r\n      if (!res.ok || !data.success) {\r\n        throw new Error(data.message || \"Invalid email or password\");\r\n      }\r\n\r\n      // ✅ Store user info\r\n      localStorage.setItem(\"token\", data.token || \"\");\r\n      localStorage.setItem(\"role\", data.role || \"user\");\r\n      localStorage.setItem(\"username\", data.username || email);\r\n\r\n      // ✅ Redirect after login\r\n      router.push(\"/E-distribution/dashboard\");\r\n    } catch (err) {\r\n      if (err instanceof Error) setError(err.message);\r\n      else setError(\"Something went wrong. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.overlay}></div>\r\n\r\n      <div className={styles.loginBox}>\r\n        <h2 className={styles.title}>e.PROCUREMENT</h2>\r\n        <p className={styles.subtitle}>Welcome back! Please sign in</p>\r\n\r\n        {error && <p className={styles.error}>{error}</p>}\r\n\r\n        <form onSubmit={handleLogin} className={styles.form}>\r\n          <div className={styles.inputGroup}>\r\n            <FaUser className={styles.icon} />\r\n            <input\r\n              type=\"email\"\r\n              placeholder=\"Username / Email\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* ✅ Password with Eye Toggle */}\r\n          <div className={styles.inputGroup}>\r\n            <FaLock className={styles.icon} />\r\n            <div className={styles.passwordWrapper}>\r\n              <input\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                placeholder=\"Password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                required\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                className={styles.eyeBtn}\r\n                aria-label=\"Toggle password visibility\"\r\n              >\r\n                {showPassword ? <FaEyeSlash /> : <FaEye />}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* ✅ Captcha Section */}\r\n          <div className={styles.captchaRow}>\r\n            <div className={styles.captchaBox}>{generatedCaptcha}</div>\r\n            <button\r\n              type=\"button\"\r\n              onClick={refreshCaptcha}\r\n              className={styles.refreshBtn}\r\n              aria-label=\"Refresh Captcha\"\r\n            >\r\n              <FaSyncAlt />\r\n            </button>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Enter Captcha\"\r\n              value={captcha}\r\n              onChange={(e) => setCaptcha(e.target.value)}\r\n              required\r\n              className={styles.captchaInput}\r\n            />\r\n          </div>\r\n\r\n          <button type=\"submit\" className={styles.button} disabled={loading}>\r\n            {loading ? \"Signing In...\" : \"Sign In\"}\r\n          </button>\r\n        </form>\r\n\r\n        <div className={styles.footerLinks}>\r\n          <a href=\"#\">Forgot User ID?</a>\r\n          <a href=\"#\">Forgot Password?</a>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}